<div>
	<button (click)="toggleNewSurvey()" >New Survey</button>
</div>

<form *ngIf="newSurveyVisible" [formGroup]="formGroup"  (ngSubmit)="createSurvey()">
	<app-survey-form formControlName="survey" ></app-survey-form>

	<input type="submit" name="new" value="New" [disabled]="formGroup.invalid" />
</form>

<ng-container *ngIf="hasSurveys ; else noSurveys">

	<table border="1">
		<thead>
			<tr>
				<th scope="col">Id</th>
				<th scope="col">Name</th>
				<th scope="col">Description</th>
				<th scope="col">fromTimeStamp</th>
				<th scope="col">untilTimeStamp</th>
				<th scope="col">Delete</th>
			</tr>
		</thead>
		<tr *ngFor="let survey of surveys">
			<td>
				<a routerLink="{{ '/survey/' + survey.id }}">{{survey.id}}</a>
			</td>
			<td>{{survey.name}}</td>
			<td>{{survey.description}}</td>
			<td>{{survey.fromDate.year}}-{{survey.fromDate.month}}-{{survey.fromDate.day}} {{survey.fromTime.hour}}:{{survey.fromTime.minute}}:{{survey.fromTime.second}}</td>
			<td>{{survey.untilDate.year}}-{{survey.untilDate.month}}-{{survey.untilDate.day}} {{survey.untilTime.hour}}:{{survey.untilTime.minute}}:{{survey.untilTime.second}}</td>
			<td>
				<button (click)="deleteSurvey(survey.id)" >Delete</button>
			</td>
		</tr>
	</table>
</ng-container>

<ng-template #noSurveys>
	<h1>No surveys.</h1>
</ng-template>
